## target="_blank"의 취약성

하이퍼링크로 사이트를 달고 새 탭으로 열어야 할 때 `<a>` 태그 속성의 `target="_blank"` 를 사용하는데, 이 때 린트를 적용했다면 [보안에 취약하다는 경고](https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-target-blank.md)가 나오게 된다. 당시엔 빠르게 해결방법을 찾아서 해결했지만 원인은 몰라서 이렇게 정리한다. 다음과 같은 시나리오를 생각해보자.

1. 해커가 페이스북에 재밌는 글에 대한 링크를 올렸다.
2. 사용자는 해당 링크를 눌러서 보고 있는 와중에 해커가 심은 코드로 인해 기존 페이스북 페이지가 피싱 사이트로 바뀌었다.
3. 사용자는 글을 다 본 후 다시 페이스북으로 돌아왔는데 로그아웃이 되어있길래 재로그인을 했다.
4. 해커는 사용자의 아이디와 비밀번호를 탈취했다.

이런식으로 `target="_blank"` 의 취약점이 들어날 수 있는데, 그 원리는 아래와 같다.

```javascript
if(window.opener) {
  window.opener.location = "http://fishing.facebook.com/index.html";
}
```

사용자가 새로 열린 탭에 정신팔린 사이에 기존 페이스북을 피싱 사이트로 변질시키는 것이다. 해결방법은 기존 사이트를 변질 못시키게 막는 것이다.

```html
<a href="funny.com" target="_blank" rel="noopener noreferrer">
	재밌는 사이트
</a>
```

`rel="noopener noreferrer"` 라는 속성이 추가되었는데 `noopener` 는 아예 `window.opener` 객체를 못 사용하게 하고 아예 별도의 프로세스에서 실행을 하는 것이고 `noreferrer` 는 비슷하지만 새로운 탭을 열게 한 사이트의 url까지 못 보게 하는 것이다.

<br>

## 참고

* [Link with target=“_blank” and rel=“noopener noreferrer” still vulnerable?](https://stackoverflow.com/questions/50709625/link-with-target-blank-and-rel-noopener-noreferrer-still-vulnerable)
* [Target="_blank" - the most underestimated vulnerability ever](https://www.jitbit.com/alexblog/256-targetblank---the-most-underestimated-vulnerability-ever/)
* [The Security Vulnerabilities of The Target="_Blank" Attribute](https://bolajiayodeji.com/the-security-vulnerabilities-of-the-target_blank-attribute-cka3hgvyw01axdjs13r1xgc7m)

