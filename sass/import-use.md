Styled components를 다루다 css 전처리기인 sass를 다루게 되면서 스타일 파일을 모듈로 인식해서 가져오는 `@import` 구문을 사용하게 되었다. 그런데 리액트의 빌드 속도가 sass에서 느려지는 것을 보고 찾아본 결과 핵심적인 문제는 아니었지만 이 구문도 공식 문서에서 권장되지 않는다는 사실을 깨달았다.

## `@import` 의 문제점

1. 모든 변수, 믹스인, 함수 등을 글로벌 스코프로 가져오기 때문에 코드를 짜는 이에게 혼란을 야기시킨다.
2. 1의 문제로 인해서 sass 관련 라이브러리 개발자들은 스타일을 짤 때 특정한 접두사를 붙여서 사용자로 하여금 덮어쓰지 않게 해야 한다.
3. `@import` 되는 시점에 css로 컴파일이 일어나는데 컴파일 속도를 늦출 수 있고, 심지어는 같은 스타일을 여러번 가져올 경우 중복된다.
4. 해당 스타일을 사용하는 다른 스타일 시트가 사용하지 못하도록 private한 스타일을 정의할 수 없다.

보다시피 다양한 문제들이 있고 이러한 문제들을 해결하기 위해서 `@use` 가 등장했다. 현재 sass 컴파일러의 3가지 구현체인 ruby-sass/libsass/dart-sass 중 **dart-sass에서만 사용가능한 제약이 있긴 하지만,** 살펴보기에 충분한 가치가 있다.

## `@use`

1. 동일한 파일을 얼마나 많이 가져오던 간에 단 1번 가져온다.
2. `_` 혹은 `-` 로 시작되는 변수, 믹스인, 함수는 private 스타일로 정의되기 때문에 가져와지지 않는다.
3. 가져오는 파일별로 네임스페이스가 생긴다.

즉 이 구문의 핵심역할은 독립된 영역으로 스타일을 구분하기 때문에 스타일링을 할 때 혼란스러움을 주지 않고 디버깅하기가 훨씬 쉽다는 것이다.

## 어떤 걸 써야 하는가?

제일 처음, sass 컴파일러의 구현체는 ruby로 만들어졌지만 2019년 3월 26일을 기준으로 [더 이상 지원되지 않는다.](https://sass-lang.com/ruby-sass) 따라서, libsass 혹은 dart-sass를 써야 하는데 흔히 리액트 프로젝트에 쓰는 것이 node-sass이다. libsass의 node 버전으로 내부는 C로 구현되어 있다. dart-sass 는 그에 반해 dart로 구현되어 있기 때문에 low-level 언어인 C보다 느릴 수밖에 없다. 따라서, `@use` 와 같은 새로운 구문이 필요 없고 속도를 원한다면 node-sass를, 새로운 기능을 원한다면 dart-sass를 쓰는 것이 맞는 선택인 것 같다.